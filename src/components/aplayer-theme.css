/* APlayer 主题样式 - 支持亮色/暗色模式 */

/* 浅色模式（默认） */
.aplayer:not(.dark) {
  --aplayer-bg: #ffffff;
  --aplayer-fg: #333333;
  --aplayer-border: #e0e0e0;
  --aplayer-highlight: #66ccff;
  --aplayer-shadow: rgba(0, 0, 0, 0.1);
  --aplayer-info-fg: #666666;
  --aplayer-button-fg: #666666;
  --aplayer-button-bg-hover: #f0f0f0;
}

/* 深色模式 */
.dark .aplayer {
  --aplayer-bg: #1a1a1a;
  --aplayer-fg: #ffffff;
  --aplayer-border: #333333;
  --aplayer-highlight: #00d4ff;
  --aplayer-shadow: rgba(0, 0, 0, 0.5);
  --aplayer-info-fg: #b0b0b0;
  --aplayer-button-fg: #e0e0e0;
  --aplayer-button-bg-hover: #2a2a2a;
  --aplayer-disabled: #666666;
  --aplayer-muted-bg: #252525;
}

/* APlayer 基础样式 */
.aplayer {
  background: var(--aplayer-bg);
  color: var(--aplayer-fg);
  border-radius: 10px 10px 0 0;
  box-shadow: 0 -2px 20px var(--aplayer-shadow);
  font-family: inherit;
  font-size: 14px;
  /* 确保播放器在所有情况下都能显示 */
  z-index: 1000 !important;
}

/* 吸底模式样式 */
.aplayer.aplayer-fixed {
  bottom: 0;
  left: 0;
  margin: 0;
  border-radius: 0;
  z-index: 10000;
  /* 确保在页面左下角，不被其他元素覆盖 */
  bottom: 0 !important;
  left: 0 !important;
  right: auto !important;
  /* 设置播放器宽度为400px */
  max-width: 400px !important;
  width: 400px !important;
  margin: 0 !important;
  /* 添加左下角定位 */
  position: fixed !important;
  transform: none !important;
}

/* 修复可能的遮挡问题 */
.aplayer-fixed .aplayer-body {
  /* 确保播放器主体有足够的空间 */
  width: 100% !important;
  max-width: 400px !important;
  margin: 0 !important;
}

/* 歌单列表样式增强 */
.aplayer .aplayer-list {
  background: var(--aplayer-bg);
  border: 1px solid var(--aplayer-border);
  border-top: none;
  border-radius: 0 0 10px 10px;
  backdrop-filter: blur(10px);
  box-shadow: 0 -4px 20px var(--aplayer-shadow);
  /* 增加列表高度，确保能显示更多歌曲 */
  max-height: 600px !important;
  /* 设置歌单列表宽度与播放器一致 (400px) */
  max-width: 400px !important;
  width: 400px !important;
  margin: 0 !important;
  /* 上移列表，防止被播放器挡住 */
  bottom: 50px !important;
  position: absolute !important;
  /* 确保列表内容可以滚动显示 */
  overflow-y: scroll !important;
  overflow-x: hidden !important;
  /* 强制显示滚动条 */
  scrollbar-width: auto !important;
  scrollbar-color: #9ca3af #f3f4f6;
}

/* Webkit浏览器的滚动条样式 */
.aplayer-list::-webkit-scrollbar {
  width: 8px;
}

.aplayer-list::-webkit-scrollbar-track {
  background: #f3f4f6;
  border-radius: 4px;
}

.aplayer-list::-webkit-scrollbar-thumb {
  background: #9ca3af;
  border-radius: 4px;
  border: 2px solid #f3f4f6;
}

.aplayer-list::-webkit-scrollbar-thumb:hover {
  background: #6b7280;
}

/* 确保滚动条始终显示 */
.aplayer-list::-webkit-scrollbar {
  opacity: 1 !important;
  visibility: visible !important;
}

/* 深色模式下的滚动条 */
.dark .aplayer-list::-webkit-scrollbar-track {
  background: #333;
}

.dark .aplayer-list::-webkit-scrollbar-thumb {
  background: #666;
  border: 2px solid #333;
}

.dark .aplayer-list::-webkit-scrollbar-thumb:hover {
  background: #888;
}

/* 深色模式下的Firefox滚动条 */
.dark .aplayer-list {
  scrollbar-color: #666 #333 !important;
}

.aplayer .aplayer-list .aplayer-list-light {
  background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(0, 212, 255, 0.1));
  transition: all 0.3s ease;
}

.aplayer .aplayer-list .aplayer-list-item {
  transition: all 0.2s ease;
  border-radius: 4px;
  margin: 3px 8px;
  /* 增加列表项高度，确保内容完整显示 */
  min-height: 50px;
  white-space: normal;
  overflow: visible;
  padding: 10px 12px;
  /* 确保文本不会溢出 */
  line-height: 1.4;
}

.aplayer .aplayer-list .aplayer-list-item:hover {
  background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 212, 255, 0.05));
  transform: translateX(4px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.aplayer .aplayer-list .aplayer-list-item:active {
  transform: translateX(2px);
}

/* 当前播放歌曲样式 */
.aplayer .aplayer-list .aplayer-list-light .aplayer-list-item-content {
  color: var(--aplayer-fg);
  font-weight: 600;
}

/* 列表项序号样式 */
.aplayer .aplayer-list .aplayer-list-index {
  color: var(--aplayer-info-fg);
  font-weight: 500;
  min-width: 24px;
  text-align: center;
  transition: all 0.3s ease;
}

.aplayer .aplayer-list .aplayer-list-light .aplayer-list-index {
  color: var(--aplayer-highlight);
  font-weight: 700;
}

/* 歌曲信息样式增强 */
.aplayer .aplayer-list .aplayer-list-item-content {
  color: var(--aplayer-fg);
  transition: all 0.3s ease;
  /* 确保内容区域有足够空间 */
  width: 100%;
  overflow: hidden;
}

.aplayer .aplayer-list .aplayer-list-item-content .aplayer-list-title {
  font-weight: 500;
  line-height: 1.4;
  /* 确保歌曲名称完整显示 */
  white-space: normal;
  word-break: break-word;
  margin-bottom: 2px;
}

.aplayer .aplayer-list .aplayer-list-item-content .aplayer-list-author {
  color: var(--aplayer-info-fg);
  font-size: 12px;
  margin-top: 2px;
  /* 确保歌手名称完整显示 */
  white-space: normal;
  word-break: break-word;
  opacity: 0.8;
}

/* 显示完整的歌曲信息 */
.aplayer .aplayer-list .aplayer-list-item-content .aplayer-list-author {
  display: block !important;
  color: var(--aplayer-info-fg);
  font-size: 12px;
  margin-top: 2px;
  opacity: 0.8;
}

.aplayer .aplayer-list .aplayer-list-item-content .aplayer-list-title {
  font-weight: 600;
  font-size: 14px;
  line-height: 1.3;
}

/* 深色模式下的列表增强效果 */
.dark .aplayer .aplayer-list {
  background: linear-gradient(135deg, #1a1a1a, #1f1f1f);
}

.dark .aplayer .aplayer-list .aplayer-list-item:hover {
  background: linear-gradient(135deg, rgba(0, 212, 255, 0.15), rgba(0, 212, 255, 0.08));
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.dark .aplayer .aplayer-list .aplayer-list-light {
  background: linear-gradient(135deg, rgba(0, 212, 255, 0.25), rgba(0, 212, 255, 0.15));
}

/* 进度条样式增强 */
.aplayer .aplayer-bar {
  background: rgba(0, 212, 255, 0.2);
  height: 4px;
  border-radius: 2px;
  position: relative;
  overflow: hidden;
}

.aplayer .aplayer-bar .aplayer-bar-loaded {
  background: linear-gradient(90deg, rgba(0, 212, 255, 0.3), rgba(0, 212, 255, 0.1));
  height: 100%;
  border-radius: 2px;
  transition: all 0.3s ease;
}

.aplayer .aplayer-bar .aplayer-bar-played {
  background: linear-gradient(90deg, var(--aplayer-highlight), #00a8cc);
  height: 100%;
  border-radius: 2px;
  position: relative;
  transition: all 0.1s ease;
}

.aplayer .aplayer-bar .aplayer-bar-handle {
  background: var(--aplayer-highlight);
  border: 2px solid rgba(255, 255, 255, 0.9);
  width: 12px;
  height: 12px;
  border-radius: 50%;
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(0, 212, 255, 0.4);
  transition: all 0.2s ease;
}

.aplayer .aplayer-bar .aplayer-bar-handle:hover {
  transform: translate(-50%, -50%) scale(1.2);
  box-shadow: 0 4px 12px rgba(0, 212, 255, 0.6);
}

.aplayer .aplayer-bar .aplayer-bar-handle:active {
  transform: translate(-50%, -50%) scale(0.9);
}

/* 音量控制样式 */
.aplayer .aplayer-volume-wrap .aplayer-volume-bar-wrap {
  background: rgba(102, 204, 255, 0.1);
}

.aplayer .aplayer-volume-wrap .aplayer-volume-bar {
  background: rgba(102, 204, 255, 0.3);
}

.aplayer .aplayer-volume-wrap .aplayer-volume-bar .aplayer-volume-bar-inner {
  background: var(--aplayer-highlight);
}

/* 按钮样式增强 */
.aplayer .aplayer-icon {
  fill: var(--aplayer-button-fg);
  transition: all 0.3s ease;
}

.aplayer .aplayer-icon:hover {
  background: var(--aplayer-button-bg-hover);
  border-radius: 50%;
  transform: scale(1.1);
}

.aplayer .aplayer-icon:active {
  transform: scale(0.95);
}

/* 播放/暂停按钮特殊效果 */
.aplayer .aplayer-icon.aplayer-icon-play,
.aplayer .aplayer-icon.aplayer-icon-pause {
  background: var(--aplayer-highlight);
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(0, 212, 255, 0.3);
}

.aplayer .aplayer-icon.aplayer-icon-play:hover,
.aplayer .aplayer-icon.aplayer-icon-pause:hover {
  background: var(--aplayer-highlight);
  opacity: 0.9;
  box-shadow: 0 4px 12px rgba(0, 212, 255, 0.4);
}

/* 深色模式下的特殊按钮效果 */
.dark .aplayer .aplayer-icon.aplayer-icon-play,
.dark .aplayer .aplayer-icon.aplayer-icon-pause {
  box-shadow: 0 2px 8px rgba(0, 212, 255, 0.4);
}

.dark .aplayer .aplayer-icon.aplayer-icon-play:hover,
.dark .aplayer .aplayer-icon.aplayer-icon-pause:hover {
  box-shadow: 0 4px 16px rgba(0, 212, 255, 0.6);
}

/* 响应式设计 - 确保播放器在移动设备上也能正常展开 */
@media (max-width: 768px) {
  .aplayer {
    font-size: 12px;
  }
  
  .aplayer.aplayer-fixed {
    border-radius: 0;
  }
  
  .aplayer .aplayer-info {
    padding: 8px 10px;
  }
  
  .aplayer .aplayer-controller {
    padding: 8px 10px;
  }
  
  .aplayer-list {
    max-height: 300px !important; /* 在移动设备上稍微减小高度 */
  }
}

/* 修复列表展开可能被截断的问题 */
.aplayer.aplayer-fixed .aplayer-list {
  margin-bottom: 0 !important;
  padding-bottom: 10px !important;
}

/* 确保列表完全显示，不被截断 */
.aplayer.aplayer-fixed .aplayer-list ul {
  padding-bottom: 20px;
}

/* 优化列表项间距，确保完全可见 */
.aplayer .aplayer-list .aplayer-list-item {
  padding: 10px 12px;
  margin: 2px 8px;
}